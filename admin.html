<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>관리자</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<h3>관리자 댓글 삭제</h3>
<div id="list"></div>

<script>
const sb = supabase.createClient(
  "https://zhebwptomqfabevvzncg.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpoZWJ3cHRvbXFmYWJldnZ6bmNnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTY4MTkxOCwiZXhwIjoyMDgxMjU3OTE4fQ.8cS94TaoiwSGFbPsKNv7DDM2_sbzfvJ5rOeyRMDIWDw"
)

async function load(){
  const { data } = await sb.from("comments").select("*").order("id")
  list.innerHTML=""
  data.forEach(c=>{
    const d=document.createElement("div")
    d.textContent=c.content
    const b=document.createElement("button")
    b.textContent="삭제"
    b.onclick=async()=>{
      await sb.from("comments").delete().eq("id",c.id)
      load()
    }
    d.appendChild(b)
    list.appendChild(d)
  })
}

load()
</script>

</body>
</html>
